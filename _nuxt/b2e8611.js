(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1215:function(t,o,r){var content=r(1258);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(110).default)("29ddb6cf",content,!0,{sourceMap:!1})},1256:function(t,o,r){t.exports=r.p+"img/img13.f2865e3.png"},1257:function(t,o,r){"use strict";var e=r(1215);r.n(e).a},1258:function(t,o,r){(o=r(109)(!1)).push([t.i,".eshop-breadcrumb{margin:45.33333px 0 20px;border-bottom:1px solid #ddd}.eshop-flexCenter{display:flex;justify-content:center;align-items:center}.eshop-danger{color:red}.eshop-cart-trow:hover{background-color:#e6d6c6}.eshop-cart-tfooter>.eshop-cart-trow:hover,.eshop-cart-thead>.eshop-cart-trow:hover{background-color:#fff}.eshop-product{background-color:#f2f2f2;margin-top:68px;min-height:calc(100vh - 68px)}.eshop-product-content{background-color:#fff;overflow:hidden;max-width:1440px;margin:0 auto;padding:0 10px;min-height:1000px}.eshop-product-img{float:left;padding:0 10px}.eshop-product-img .ant-carousel{width:700px;height:500px}.eshop-product-img .ant-carousel .slick-slider,.eshop-product-img .ant-carousel .slick-slider .slick-list,.eshop-product-img .ant-carousel .slick-slider .slick-track,.eshop-product-img .ant-carousel .slick-slider .slick-track .slick-slide,.eshop-product-img .ant-carousel .slick-slider .slick-track .slick-slide div{width:100%;height:100%}.eshop-product-img-slot{display:inline-block;width:80px;height:80px}.eshop-product .slick-thumb{bottom:-25px}.eshop-product .slick-dots .slick-active img{border:3px solid grey}.eshop-product .eshop-product-buy{overflow:hidden;padding-left:140px}.eshop-product .eshop-product-buy-price{font-size:20px;font-weight:700;color:red}.eshop-product .eshop-product-buy-selled{color:#555}.eshop-product .eshop-product-buy-form{margin-top:20px;font-size:16px}",""]),t.exports=o},1275:function(t,o,r){"use strict";r.r(o);r(51);var e,n,c=r(19),d=r(1256),l=r.n(d),h={name:"Hello",data:function(){return{normal:l.a,productInfo:{},amount:1,imgs:["/_nuxt/assets/images/other/img11.png","/_nuxt/assets/images/other/img12.png","/_nuxt/assets/images/other/img13.png"]}},computed:{productId:function(){return this.$route.query.id},userId:function(){var t;return null===(t=this.$store.state.user.userInfo)||void 0===t?void 0:t.id},slideshow:function(){var t=[],o=this.productInfo.slideshow;if(o){console.log("SLIDESHOW",o);for(var i=1;i<=5;i++){var r="avatar"+i;o[r]&&t.push(o[r])}}return 0==t.length&&t.push(this.normal),console.log(t),t}},created:function(){this.refresh()},methods:{getAvatars:function(t,i){if(!t)return this.normal;if(!t.slideshow)return this.normal;var o="avatar"+i>0?i:"";return t.slideshow[o]},addToCart:(n=Object(c.a)(regeneratorRuntime.mark((function t(){var o,r,e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.userId||this.$router.push("/login"),0!==this.amount){t.next=4;break}return t.abrupt("return");case 4:return this.amount,o={productid:this.productId,number:this.amount,userid:this.userId},t.next=8,this.$axios.post("/shopping/addshopping",o);case 8:r=t.sent,e=r.data.data,r&&e?(this.$message.success("添加成功"),this.amount=0):this.$message.error("添加失败"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),this.$message.error("添加失败"),console.log(t.t0);case 17:return t.prev=17,this.$store.dispatch("cart/fetchCartData",{userId:this.userId}),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[0,13,17,20]])}))),function(){return n.apply(this,arguments)}),refresh:(e=Object(c.a)(regeneratorRuntime.mark((function t(){var o,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,void 0!==this.productId&&null!==this.productId){t.next=3;break}return t.abrupt("return");case 3:return o={id:this.productId},console.log(this.productId),t.next=7,this.$axios.post("/product/getproduct",o);case 7:r=t.sent,data=r.data.data,this.productInfo=data,console.log(this.productInfo),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])}))),function(){return e.apply(this,arguments)}),getImgUrl:function(i){return this.slideshow[i]}},components:{}},m=(r(1257),r(59)),component=Object(m.a)(h,(function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",{staticClass:"eshop-product"},[r("div",{staticClass:"eshop-product-content"},[r("div",{staticClass:"eshop-breadcrumb"},[r("a-breadcrumb",{attrs:{separator:">"}},[r("a-breadcrumb-item",[r("nuxt-link",{attrs:{to:"/home"}},[t._v("首页")])],1),t._v(" "),r("a-breadcrumb-item",[r("nuxt-link",{attrs:{to:"/allProduct"}},[t._v("所有产品")])],1),t._v(" "),r("a-breadcrumb-item",[r("nuxt-link",{attrs:{to:""}},[t._v(t._s(t.productInfo.name?t.productInfo.name:"--"))])],1)],1)],1),t._v(" "),r("div",{staticClass:"eshop-product-item"},[r("div",{staticClass:"eshop-product-img"},[r("a-carousel",{attrs:{arrows:"","dots-class":"slick-dots slick-thumb"},scopedSlots:t._u([{key:"customPaging",fn:function(o){return r("a",{staticClass:"eshop-product-img-slot"},[r("img",{attrs:{src:t.getImgUrl(o.i)}})])}}])},[t._v(" "),t._l(t.slideshow,(function(t,i){return r("div",{key:i},[r("img",{attrs:{src:t}})])}))],2)],1),t._v(" "),r("div",{staticClass:"eshop-product-buy"},[r("h1",[t._v(t._s(t.productInfo.name?t.productInfo.name:"--"))]),t._v(" "),r("p",[t._v("类型："+t._s(t.productInfo.brand?t.productInfo.brand.brand:"--"))]),t._v(" "),r("p",[t._v("品牌："+t._s(t.productInfo.type?t.productInfo.type.type:"--"))]),t._v(" "),r("p",[t._v("详情:"+t._s(t.productInfo.detail?t.productInfo.detail:"--"))]),t._v(" "),r("div",[r("span",{staticClass:"eshop-product-buy-price"},[t._v("￥"+t._s(t.productInfo.price?t.productInfo.price:0))]),t._v(" "),r("span",{staticClass:"eshop-product-buy-selled"},[t._v("已售出"+t._s(t.productInfo.sales?t.productInfo.sales:0))])]),t._v(" "),r("div",{staticClass:"eshop-product-buy-form"},[r("a-form-model",{attrs:{layout:"vertical"}},[r("a-form-model-item",{attrs:{label:"选择数量"}},[r("a-input",{style:{width:"120px"},attrs:{min:0,max:t.productInfo.stock?t.productInfo.stock:0,type:"number"},model:{value:t.amount,callback:function(o){t.amount=o},expression:"amount"}}),t._v(" "),r("span",[t._v("件")]),t._v(" "),r("span",[t._v("（库存"+t._s(t.productInfo.stock?t.productInfo.stock:0)+"）")])],1),t._v(" "),r("a-form-model-item",[r("a-button",{style:{width:"220px"},attrs:{type:"primary"},on:{click:t.addToCart}},[t._v("加入购物车")])],1)],1)],1)])])])])}),[],!1,null,null,null);o.default=component.exports}}]);